<launch>

  <arg name="uav_name" default="$(optenv UAV_NAME uav)"/>
  <arg name="world_file" default="$(find mrs_main)/config/world_current.yaml"/>

  <group ns="$(arg uav_name)">

    <!-- Mavros -->
    <include file="$(find mrs_main)/launch/mavros_f550.launch" />

    <!-- Teraranger -->
    <include file="$(find terarangerone)/launch/test.launch" />

    <!-- Garmin -->
    <include file="$(find garmin_rangefinder)/launch/test.launch" />

    <node name="mrs_odometry" pkg="mrs_odometry" type="Odometry" output="screen" >

			<rosparam file="$(find mrs_odometry)/config/f550.yaml" />
      <rosparam file="$(arg world_file)" />

      <!-- parameter -->
      <param name="uav_name" type="string" value="$(arg uav_name)"/>
      <param name="simulation" type="bool" value="false"/>

      <!-- Subscribers --> 
      <remap from="~pixhawk_odom" to="mavros_interface/converted_mavros_odom" />
			<remap from="~terarangerone" to="teraranger/range" />
			<remap from="~garmin" to="garmin/range" />
			<remap from="~global_position" to="mavros/global_position/global" />
			<remap from="~tracker_status" to="control_manager/status" />
      <remap from="~rtk_gps" to="rtk_gps/local" />
      <remap from="~object_altitude" to="landing_object_controller/current_target" />

      <!-- Publishers --> 
      <remap from="~new_odom" to="~new_odom" />

      <!-- Services --> 
			<remap from="~toggle_teraranger" to="~toggle_teraranger" />
      <remap from="~toggle_rtk_altitude" to="~toggle_rtk_altitude" />

    </node>

  </group>

</launch>
